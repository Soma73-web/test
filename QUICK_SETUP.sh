#!/bin/bash

# Quick Setup Guide for Student Login Improvements
# This script helps you test the new login/logout features

echo "üéì NEET Academy - Student Login Improvements"
echo "=============================================="
echo ""

# Check if we're in the right directory
if [ ! -f "package.json" ]; then
    echo "‚ùå Error: Please run this from the project root directory"
    exit 1
fi

echo "üì¶ Installation Steps:"
echo "1. Backend setup"
echo "2. Frontend setup"
echo "3. Testing checklist"
echo ""

# Backend
echo "üîß Backend Setup"
echo "==============="
cd backend
echo "‚úì Installing backend dependencies..."
npm install 2>/dev/null || echo "‚ö†Ô∏è  npm install skipped"

echo ""
echo "‚úì Check .env file has:"
echo "   - JWT_SECRET=your-secure-key"
echo "   - NODE_ENV=production (for testing)"
echo ""

# Frontend  
echo "üé® Frontend Setup"
echo "================"
cd ../client
echo "‚úì Installing frontend dependencies..."
npm install 2>/dev/null || echo "‚ö†Ô∏è  npm install skipped"

echo ""
echo "‚úì Verify react-icons is installed (for Feather icons)"
npm ls react-icons 2>/dev/null | head -5

echo ""
echo "‚úÖ Setup Complete!"
echo ""
echo "üìù Testing Checklist:"
echo "===================="
echo ""
echo "‚ñ° Login Features:"
echo "  ‚ñ° Password strength indicator updates in real-time"
echo "  ‚ñ° Show/hide password toggle works"
echo "  ‚ñ° 'Remember me' saves student ID"
echo "  ‚ñ° Error messages are helpful and clear"
echo ""
echo "‚ñ° Security Features:"
echo "  ‚ñ° Try 5 wrong passwords ‚Üí account locks for 5 minutes"
echo "  ‚ñ° Lockout countdown timer displays"
echo "  ‚ñ° Correct password clears the lockout"
echo ""
echo "‚ñ° 3D Effects:"
echo "  ‚ñ° Particle background animation is smooth"
echo "  ‚ñ° Login card has hover effects"
echo "  ‚ñ° Logout dialog is beautiful with animations"
echo ""
echo "‚ñ° Dashboard Features:"
echo "  ‚ñ° Session timer counts up in real-time"
echo "  ‚ñ° Student info displays correctly"
echo "  ‚ñ° Tab switching works smoothly"
echo "  ‚ñ° Security badge is visible"
echo ""
echo "‚ñ° Session Management:"
echo "  ‚ñ° Inactive for 25 mins ‚Üí see warning banner"
echo "  ‚ñ° Warning shows countdown timer"
echo "  ‚ñ° Click 'Stay Active' resets timeout"
echo "  ‚ñ° After 30 mins ‚Üí auto logout"
echo ""
echo "‚ñ° Logout:"
echo "  ‚ñ° Click logout ‚Üí beautiful confirmation dialog"
echo "  ‚ñ° Dialog shows session duration"
echo "  ‚ñ° Confirm logout ‚Üí redirects to home"
echo "  ‚ñ° Cancel ‚Üí returns to dashboard"
echo ""
echo "üöÄ Running the Application:"
echo "============================"
echo ""
echo "Terminal 1 - Backend:"
echo "  cd backend && npm start"
echo "  (should start on http://localhost:5000)"
echo ""
echo "Terminal 2 - Frontend:"
echo "  cd client && npm start"
echo "  (should open http://localhost:3000)"
echo ""
echo "üß™ Quick Test Credentials:"
echo "=========================="
echo "Ask your admin for test student credentials"
echo ""
echo "üìä What Changed?"
echo "================="
echo "Files Modified:"
echo "  ‚Ä¢ client/src/pages/StudentLogin.jsx"
echo "  ‚Ä¢ client/src/pages/StudentDashboard.jsx"
echo "  ‚Ä¢ backend/controllers/studentController.js"
echo "  ‚Ä¢ backend/routes/studentRoutes.js"
echo ""
echo "New Files:"
echo "  ‚Ä¢ client/src/utils/sessionManager.js"
echo "  ‚Ä¢ STUDENT_LOGIN_IMPROVEMENTS.md"
echo "  ‚Ä¢ LOGIN_LOGOUT_SUMMARY.md"
echo ""
echo "üí° Pro Tips:"
echo "============"
echo "‚Ä¢ Use F12 ‚Üí Console to check for any errors"
echo "‚Ä¢ Check Network tab to verify API calls"
echo "‚Ä¢ Open DevTools ‚Üí Application to see localStorage"
echo "‚Ä¢ Test on mobile device for responsive design"
echo ""
echo "üìö Documentation:"
echo "================"
echo "For detailed info, read:"
echo "  ‚Ä¢ STUDENT_LOGIN_IMPROVEMENTS.md (comprehensive guide)"
echo "  ‚Ä¢ LOGIN_LOGOUT_SUMMARY.md (feature summary)"
echo ""
echo "üéØ Security Notes:"
echo "=================="
echo "‚Ä¢ Always use HTTPS in production"
echo "‚Ä¢ Keep JWT_SECRET strong and secret"
echo "‚Ä¢ Review server logs for suspicious login attempts"
echo "‚Ä¢ Test with various edge cases"
echo ""
echo "‚ùì Issues?"
echo "=========="
echo "1. Check backend is running on port 5000"
echo "2. Check frontend .env has correct API_BASE_URL"
echo "3. Clear browser cache (Ctrl+Shift+Delete)"
echo "4. Check browser console for errors"
echo "5. Look for console errors in both frontend and backend"
echo ""
echo "‚ú® Ready to test! Good luck! üöÄ"
